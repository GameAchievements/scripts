(()=>{var R=e=>{let t=o=>`0${o}`.slice(-2),s=new Date(e);return`${s.getFullYear()} . ${t(s.getMonth()+1)} . ${t(s.getDate())}`},N=e=>{let t=o=>`0${o}`.slice(-2),s=new Date(e);return`${t(s.getHours())}h${t(s.getMinutes())}`},G=e=>{let t=new Date(e),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=t.getDate()+" "+s[t.getMonth()]+", "+t.getFullYear(),a=t.toLocaleTimeString().toLowerCase();return{date:o,time:a}};var P=e=>{switch(e){case"playstation":return 1;case"xbox":return 2;case"steam":default:return 3}};var V=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var S=e=>e?.includes("steamstatic")||e?.includes("steampowered"),W=e=>e?.includes("images-eds.xboxlive.com");var U=e=>{if(!e)return"N.A.";let t=e.lastIndexOf(" | ");return t>0?e.slice(0,t):e};var se=e=>{if(e<25)return"common";if(e<50)return"rare";if(e<75)return"very-rare";if(e>=75)return"ultra-rare"},q=(e,t,s=".hero-section-achievement")=>{let o=se(e);return t=$(".rarity-tag-wrapper",t).children(`:not(.gas-rarity-tag-${o})`).hide().parents(s).prop("outerHTML"),t};var T=(e,t,s,o=!1)=>{e.append(t).children().last().removeClass(["bg-light","bg-dark","locked","unlocked"]).addClass(`bg-${s%2>0?"light":"dark"}`).addClass(`${o?"unlocked":"locked"}`)};var A=(e,t,s=".gas-list-entry")=>{let o={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return o.ps.rgx.test(e)&&(t=$(".gas-platform-psn",t).css("display","inherit").parents(s).prop("outerHTML")),o.steam.rgx.test(e)&&(t=$(".gas-platform-steam",t).css("display","inherit").parents(s).prop("outerHTML")),o.xbox.rgx.test(e)&&(t=$(".gas-platform-xbox",t).css("display","inherit").parents(s).prop("outerHTML")),t};var B=(e,t,s=".gh-row")=>{let o=e?.unlocked;return o&&(t=t.replaceAll("{|unlockedAt|}",`${N(e.unlockedAt)}<br />${R(e.unlockedAt)}`)),t=$(".status-wrapper",t).children(`:not(.${o?"unlocked":"locked"}-status)`).hide().parents(s).prop("outerHTML"),t};var _=(e,t,s=".gh-row")=>(t=$(".trophy-wrapper",t).children(`:not(.trophy-${e.toLowerCase()})`).hide().parents(s).prop("outerHTML"),t);var L=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var z=(e,t)=>{let s=rarityClassCalc(e);return t=t.replaceAll("{|rarity|}",s.replace("-"," ")),t=$(".gas-rarity-tag",t).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${s}`).children(".p1").addClass(s).parents(".gas-list-entry").prop("outerHTML"),t};var J=(e,t,s={})=>{$(`${e} form.search`).on("submit",async function(o){o.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};function X(e){switch(e){case 1:return"#FF6C6C";case 2:return"#FF876C";case 3:return"#FFB36C";case 4:return"#FFD66C";case 5:return"#D0FF6C";case 6:return"#6CFFCA";case 7:return"#69E4FF";case 8:return"#99A3FF";case 9:return"#C699FF";case 10:return"#FFA0EA";default:return"#5663BA"}}function oe(e=""){return`<svg ${e} viewBox="0 0 400 283" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M396.063 200.058C387.286 177.198 388.232 171.375 363.69 113.777C342.879 64.745 324.486 39.1518 302.256 32.5827V16.449C302.256 7.35738 294.899 0 285.807 0H260.74C251.648 0 244.291 7.35738 244.291 16.449V30.7959H155.687V16.449C155.687 7.35738 148.277 0 139.238 0H114.17C105.079 0 97.7212 7.35738 97.7212 16.449V32.5827C75.4388 39.1518 57.098 64.745 36.2345 113.777C11.6925 171.427 12.5859 177.25 3.80958 200.058C-4.91416 222.919 0.341103 257.656 30.0859 275.104C59.8833 292.499 89.6806 279.36 114.17 246.568C138.712 213.775 148.329 215.414 169.35 215.414H230.679C251.701 215.414 261.265 213.775 285.807 246.568C310.297 279.36 340.094 292.446 369.891 275.104C399.636 257.709 404.944 222.919 396.168 200.058H396.063Z" />
    </svg>`}function j(){$("svg",this).css("fill",X(Number($(this).data("rate")))),$("p",this).show()}function Q(){$("svg",this).css("fill","#5663BA"),$("p",this).hide()}function Y(e,t){for(let s=1;s<11;s++)e.append(`<li data-rate="${s}" role="button"><p>${s}</p>${oe()}</li>`);$("li",e).click(function(){$(this).siblings().removeClass("rating-active"),$(this).addClass("rating-active");let s=Number($(this).data("rate"));t.data("rate",s).text(`${s}/10`).css("color",X(s))}),$("li",e).on("mouseenter",function(){j.apply(this),$(this).nextAll().each(Q),$(this).prevAll().each(j)}),$("li",e).on("mouseleave",function(){let s=$(".rating-active",e);s.length?(j.apply(s),s.prevAll().each(j),s.nextAll().each(Q)):$("li",e).each(Q)})}function C(e){return oe(`class="bg-review-score" fill="${X(e)}"`)}var ge="#gas-gh";function fe({listsData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:o}){console.info(`=== ${t} results ===`,e),$(`${t} .gas-list-first, ${t} .gas-list-latest`).each((p,m)=>{let h=$(m),g=h.prop("outerHTML"),r=$(".gas-list-empty",h),x=h.children().first(),i=$(".gas-list-entry",h).first();h.html(x);let d=e[p===0?"firstAchievers":"latestAchievers"];d?.length>0?(i.show(),h.append(i),g=i.prop("outerHTML"),i.hide(),d.forEach((c,u)=>{let n=g;Object.entries(c).forEach(([f,l])=>{let w=$(".gas-list-entry-cover",n);if(w&&c.iconURL?.length&&(n=L(w,c.avatar)||n),n=n.replaceAll("{|idx|}",u+1),f==="unlockedAt"){let{date:v,time:y}=G(l);n=n.replaceAll("{|unlockedDt|}",v||"N.A."),n=n.replaceAll(`{|${f}|}`,y||"N.A.")}else o.includes(f)?n=n.replaceAll(`{|${f}|}`,l||""):s.includes(f)&&(n=n.replaceAll(`{|${f}|}`,Math.round(l||0)))}),T(h,n,u)})):(h.append(r),r.show())})}async function $e({gamehubURL:e},{listName:t,numKeysToReplace:s,textKeysToReplace:o}){let a=`${ge}-${t}`,m=await(await fetch(`${e}/${t}`)).json();fe({listsData:m,elemId:a,numKeysToReplace:s,textKeysToReplace:o})}async function re(e){await $e({gamehubURL:e},{listName:"achievers",numKeysToReplace:["id","achievementId"],textKeysToReplace:["profileId","achievementName","playerName","name"]})}var ue="#gas-gh",we=document.querySelector("meta[name=domain]")?.content;async function Z(e,t){let s=`${ue}-achievements`,o=$(`${s} .ga-loader-container`),a=$(`${s} .${t===1?"psn":"xbox"}-achievement-list`),p=$(`${s} .empty-state`);p.hide(),a.hide(),o.show();let m={Authorization:`Bearer ${token}`},g=await(await fetch(`https://${we}/api/game/${e}/achievements${t?`?platform=${t}`:""}`,{headers:token?m:{}})).json();console.info(`=== ${s} results ===`,g);let r=["name","description"],x=["id","score","achieversCount","gAPoints"],i=a.parent(),d=a.children().first(),c=$(".gh-row",a).first();c.show();let u=c.prop("outerHTML");a.html(d).append(c),g.length>0?(c.hide(),g.forEach((n,f)=>{let l=u;Object.entries(n).forEach(([w,v])=>{let y=$(".gas-list-entry-cover",l);y&&n.iconURL?.length&&(l=L(y,n.iconURL,".gh-row")||l),w==="name"?l=l.replaceAll("{|name|}",U(v)||"N.A."):r.includes(w)?l=l.replaceAll(`{|${w}|}`,(w.endsWith("At")?gaDate(v):v)||""):x.includes(w)?l=l.replaceAll(`{|${w}|}`,Math.round(v||0)):w==="rarity"?l=q(v,l,".gh-row"):w==="trophyType"&&t===1?l=_(v,l):w==="userProgress"&&(l=B(v,l))}),T(a,l,f,n.userProgress?.unlocked)}),o.hide(),i.removeClass("hidden"),a.css({display:"flex","flex-direction":"column"}),p.hide()):(o.hide(),a.hide(),p.show())}var xe="#gas-gh",M="#gas-gh-versions-dropdown";async function ve(e){let t=$(e.target);$(`${M}-options,${M}-toggle`).removeClass("w--open");let s=Number(t.data("version-id")),o=Number(P(t.data("platform")?.toLowerCase())||0);$(`${M}-text-selected`).text(t.text()),Z(s,o)}async function ae(e,t){let s="versions",o=`${xe}-${s}`;if(!e.versionDetails){let d=e.platforms??e.importedFromPlatforms,c=Number(d?.length>=1?P(d[0].toLowerCase()):0);return $(M).remove(),Z(e.id,c)}let p=await(await fetch(`${t}/${s}`)).json(),m=["achievementsCount"],h=["gameId","externalGameId","region"];console.info(`=== ${o} results ===`,p);let g=$(o).prop("outerHTML"),r=$(`${o} .gas-list`),x=$(`${o} .heading-description-wrapper`).children().last(),i=x.prop("outerHTML");if(i&&(i=i.replaceAll("{|name|}",e.name),x.prop("outerHTML",i)),p.length){let d=r.children().first(),c=$(".gas-list-entry",r).first();c.show(),g=c.prop("outerHTML"),r.html(d).append(c),c.hide();let u="gas-version-option",n=$(`${M}-options`).children().first();n.addClass(u),p.forEach((f,l)=>{let w=n.clone(),v=f.consoles[0]+(f.region?` \u2014 ${f.region} `:"");w.data("version-id",f.gameId).data("version-external-id",f.externalGameId).data("platform",f.platform).text((f.name?.length?`${f.name} | `:"")+v),$(`${M}-options`).append(w);let y=g;Object.entries(f).forEach(([b,D])=>{h.includes(b)?y=y.replaceAll(`{|${b}|}`,D||"?"):m.includes(b)?y=y.replaceAll(`{|${b}|}`,Math.round(D||0)):b==="name"?y=y.replaceAll(`{|${b}|}`,f.name?.length?f.name:v):b==="platform"?y=A(D,y):b==="consoles"&&(y=$(".gas-console-tags",y).html(D.map(ee=>{let te=ee.toLowerCase();return`<div class="console-${te.startsWith("ps")?"playstation":te.slice(0,4)}">${ee}</div>`})).parents(".gas-list-entry").prop("outerHTML"))}),T(r,y,l)}),n.remove(),$(`.${u}`).on("click",ve)}r.css("display","flex"),$(`${o}-tab .gas-list-empty`).show(),$(`${o},${o}-tab-btn`).css("display","flex")}var I="#gas-gh";function ne(e,t){let s=$(t),o=s.prop("outerHTML");console.info(`=== ${t} ===`,e);let a=["name","igdbId","description"],p=["ownersCount","achievementsCount","gaReviewScore","versionsCount","completion"],m=["releaseDate"],h=[],g=["developers","publishers","franchises","engines","modes","genres","themes","series","supportedLanguages","playerPerspectives"],r=[...a,...m],x=[...p,...h];t.endsWith("top")&&(e.coverURL||e.imageURL)?.length&&(o=s.css("background-image",`linear-gradient(rgba(255,255,255,0),#030922),
          linear-gradient(rgba(70,89,255,.4),rgba(70,89,255,.4)),
          url(${e.coverURL||e.imageURL})`).prop("outerHTML")),$(".gas-img",o).each((c,u)=>{e.imageURL?.length&&(o=L($(u),e.imageURL,t)||o)}),Object.entries(e).forEach(([c,u])=>{r.find(n=>n.toLowerCase()===c.toLowerCase())?o=o.replaceAll(`{|${c}|}`,u?.length?c.endsWith("Date")?R(u):u:"N.A."):x.find(n=>n.toLowerCase()===c.toLowerCase())?o=o.replaceAll(`{|${c}|}`,Math.round(u||0)):c==="platformsInGACount"&&t.endsWith("top")?o=A(u?.length?u:e.importedFromPlatforms,o,t):g.includes(c)&&(o=o.replaceAll(`{|${c}|}`,u?.length?u.join(", "):"N.A."))}),s.prop("outerHTML",o);let i=Object.keys(e),d=[...p,...r,...g].filter(c=>!i.includes(c));d.forEach(c=>{$(`div:contains({|${c}|})`).parent(".entry-wrapper").remove()}),t.endsWith("about")&&d.length>0&&$(".about-game-entry-div").each(function(){$(this).find(".entry-wrapper").length===0&&$(this).remove()})}async function ie(e,t){let s=await fetch(e);if(!s.ok){location.replace("/games");return}let o=await s.json();if(Object.keys(o).length>0&&o.id){if(o.versionDetails&&o.versionDetails.defaultVersion!==Number(t)){location.replace(`/game?id=${o.versionDetails.defaultVersion}`);return}document.title=`${o.name?.length?o.name:o.id} | ${document.title}`,o.igdbId?.length?["top","about"].forEach(a=>{ne(o,`${I}-${a}`)}):($(`${I}-about,${I}-igdb-id,[href="${I}-about"]`).remove(),ne(o,`${I}-top`))}return o}var H="#gas-gh";function ye(e){if($("#official-review-game-title").text(e.name),$(`${H}-top-ga-score`).prepend(C(0)),$(`${H}-top-ga-score-text`).text("-"),!e?.gaReviewURL?.length)return;let t=`${H}-official-review`;if($(t).css("display","flex"),$(`${t}-placeholder`).hide(),$(`${t}-url`).attr("href",e.gaReviewURL),e?.gaReviewSummary?.length&&$(`${t}-summary`).text(e.gaReviewSummary),e?.gaReviewScore){let s=Math.round(e.gaReviewScore),o=C(s);$(`${t}-score-text`).text(s),$(`${t}-score-bg`).replaceWith(o),$(`${H}-top-ga-score .bg-review-score`).replaceWith(o),$(`${H}-top-ga-score-text`).text(s)}else $(`${t}-score`).parent().remove()}async function Le(e,t){let s=`${H}-review-form`;if((await fetch(`${e}/review`,{headers:{Authorization:`Bearer ${t}`}})).status===200){$(s).remove();return}let a=$(".submit-button",s);a.attr("disabled",!0);let p=$("[name=title]",s),m=$("[name=content]",s),h=$("[name][required]",s),g=a.val(),r=$(".gas-form-error",s),x=$("div",r),i=r.text(),d=$(".gas-form-success",s),c=$(".gas-rating-scale",s),u=$(".gas-rating-selected",s);Y(c,u);let n=!1,f=()=>{n&&Number(u.data("rate"))&&a.removeClass("disabled-button").attr("disabled",!1)};h.on("focusout keyup",function(){h.each(function(){$(this).val()?.length?(n=!0,$(this).prev("label").removeClass("field-label-missing")):(n=!1,$(this).prev("label").addClass("field-label-missing"),a.addClass("disabled-button").attr("disabled",!0))}),f()}),$("li",c).one("click",function(){c.parent().prev("label").removeClass("field-label-missing"),f()}),a.on("click",async l=>{l.preventDefault();let w=Number(u.data("rate")||0);if(!w||!p.val()?.length||!m.val().length){r.show(),x.text("Please choose a rating and fill-in required fields"),setTimeout(()=>{r.hide(),x.text(i)},formMessageDelay);return}isUserInputActive=!1,$("input",s).attr("disabled",!0),a.val(a.data("wait"));let v={title:p.val(),content:m.val(),rating:w},y=await fetch(`${e}/review`,{method:"POST",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v)}),b=await y.json();if(y.status!==201){r.show(),x.text(b?.message),setTimeout(()=>{r.hide(),x.text(i),$("input",s).attr("disabled",!1),a.val(g)},formMessageDelay);return}$("form",s).hide(),d.attr("title",b?.message).show(),setTimeout(()=>{location.reload()},formMessageDelay)})}function le(e,t,s){ye(s),Le(e,t)}function ce({listData:e,elemId:t}){let s=$(t+"-bars"),o=[],a=["positive","mixed","negative"];if(e.length){a.forEach(m=>{o=e.filter(r=>r.classification?.toLowerCase()===m);let h=$(`.gas-bar-${m}`,s);h.length&&h.css("width",`${100*(o.length/e.length)||1}%`);let g=$(`.gas-bar-text-${m}`,s);g.length&&g.text(o?.length)});let p=Math.round(e.map(m=>m.rating).reduce((m,h)=>m+h)/e.length);$(".gas-avg-rate-wrapper").each((m,h)=>{$(h).prepend(C(p)),$(".gas-avg-rate-text",h).text(p)})}else a.forEach(p=>{$(`.gas-bar-${p}`,s).css("width","1%")}),$(".gas-avg-rate-wrapper").each((p,m)=>{$(m).prepend(C(0)),$(".gas-avg-rate-text",m).text("-")})}var be=["all","playstation","xbox","steam"];function pe({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:o,tabCounts:a,tabMatcher:p}){let m=$(`${t} .gas-list-tabs`);console.info(`=== ${t} results ===`,e);let h=m.prop("outerHTML");a||(p="platform",a={all:e.length,playstation:e.filter(g=>g[p].toLowerCase()==="playstation")?.length,xbox:e.filter(g=>g[p].toLowerCase()==="xbox")?.length,steam:e.filter(g=>g[p].toLowerCase()==="steam")?.length},be.forEach(g=>{h=h.replaceAll(`{|${g}Cnt|}`,a[g])||"0"})),m.prop("outerHTML",h),Object.keys(a).forEach(g=>{let r=$(`${t} .gas-list-${g}`),x=$(".gas-list-empty",r);if(a[g]>0){let i=r.children().first(),d=$(".gas-list-entry",r).first();d.show(),h=d.prop("outerHTML"),r.html(i).append(d),d.hide(),(g==="all"?e:e.filter(c=>c[p]?.toLowerCase()===g)).forEach((c,u)=>{let n=h;Object.entries(c).forEach(([f,l])=>{let w=$(".gas-list-entry-cover",n);if(w&&c.iconURL?.length&&(n=L(w,c.iconURL)||n),t.endsWith("achievements")&&f==="name")n=n.replaceAll("{|name|}",U(l)||"N.A.");else if(o.includes(f))n=n.replaceAll(`{|${f}|}`,(f.endsWith("At")?gaDate(l):l)||"");else if(s.includes(f))n=n.replaceAll(`{|${f}|}`,Math.round(l||0));else if(f==="rating"){n=n.replaceAll(`{|${f}|}`,Math.round(l||0));let v=$(".gas-list-entry-rating",n);v.length&&(n=v.prepend(C(l)).parents(".gas-list-entry").prop("outerHTML"))}else f==="platform"?n=A(l,n):f==="rarity"&&(n=z(l,n))}),T(r,n,u)})}else r.html(x),x.show()})}async function O({elemIdPrefix:e,gamehubURL:t},{listName:s,numKeysToReplace:o,textKeysToReplace:a,tabs:p,tabMatcher:m}){let h=`${e}-${s}`,r=await(await fetch(`${t}/${s}`)).json();if(Array.isArray(r)||r.length>0){let x;switch(Array.isArray(p)&&(x={},p.forEach(i=>{x[i]=i==="all"?r.length:r.filter(d=>d[m]?.toLowerCase()===i)?.length})),s){case"reviews":ce({listData:r,elemId:h}),$(".gas-count-reviews").each((i,d)=>{$(d).text($(d).text().replace("{|reviewsCnt|}",r.length)),i>0&&$(d).text($(d).text().replace(`{|${p[i]}ReviewsCnt|}`,x[p[i]]))});break;case"guides":$(`${e}-top .gas-count-guides`).text(r.length);break;default:break}pe({listData:r,elemId:h,numKeysToReplace:o,textKeysToReplace:a,tabCounts:x,tabMatcher:m})}}async function me(e,t){await O({elemIdPrefix:e,gamehubURL:t},{listName:"guides",numKeysToReplace:["id","commentsCount","viewsCount","likesCount"],textKeysToReplace:["profileId","name","description","author","updatedAt"]})}var Te="#gas-gh",Ae=document.querySelector("meta[name=forum-domain]")?.content;function Re({gamehubData:e},{listData:t,elemId:s,numKeysToReplace:o,textKeysToReplace:a}){console.info(`=== ${s} results ===`,t);let p=$(s).prop("outerHTML"),m=$(`${s} .gas-list`),h=$(`${s} .gas-list-empty`),g=$(".gas-list-entry",m).first();if(g.show(),p=g.prop("outerHTML"),g.hide(),t?.length&&p?.length)m.html(g),t.forEach((r,x)=>{let i=p;i=i.replaceAll("{|idx|}",x+1),Object.entries(r).forEach(([d,c])=>{if(r.gameIconURL?.length&&!S(r.gameIconURL)){let u=$(".gas-list-entry-cover-game",i);u?.length&&(i=L(u,r.gameIconURL)||i)}if((r.iconURL?.length||r.imageURL?.length)&&!W(r.imageURL)&&!S(r.imageURL)&&!S(r.iconURL)){let u=$(".gas-list-entry-cover",i);u?.length&&(i=s.includes("list-games")?u.css("background-image",`url(${r.imageURL})`).parents(".gas-list-entry").prop("outerHTML"):L(u,r.iconURL||r.imageURL)||i)}a.includes(d)?i=i.replaceAll(`{|${d}|}`,(d.endsWith("At")?R(c):V(c))||""):o.includes(d)?i=i.replaceAll(`{|${d}|}`,Math.round(c||0)):d==="lastPlayed"?i=i.replaceAll(`{|${d}|}`,R(c)):(d==="importedFromPlatform"||d==="platform")&&(i=A(c,i))}),m.append(i)});else{t?.length&&!p?.length&&console.error(`${s} template issue (missing a '.gas-' class?)`);let r=h.children().first(),x=r.prop("outerHTML").replaceAll("{|name|}",e.name);r=r.prop("outerHTML",x),$(s).html(h),h.show()}m.css("display","flex")}async function he(e){let t=[],s=`${Te}-forum-threads`;if(e.forumCategoryID){let o=await fetch(`https://${Ae}/api/category/${e.forumCategoryID}`);o.ok&&(t=(await o.json()).topics.slice(0,5)),t=t.map(a=>({id:a.cid,title:a.title,topic_id:a.tid,author_name:a.user.username,imageURL:a.user.picture?.toLowerCase().includes("http")?new DOMParser().parseFromString(a.user.picture,"text/html").documentElement.textContent:"https://uploads-ssl.webflow.com/6455fdc10a7247f51c568c32/64b50ee999d75d5f75a28b08_user%20avatar%20default.svg",category_name:a.category.name,category_id:a.category.cid,views:a.viewcount,upvotes:a.upvotes,replies:a.postcount}))}Re({gamehubData:e},{listData:t,elemId:s,numKeysToReplace:["replies","views","upvotes"],textKeysToReplace:["title","author_name","category_name","topic_id","category_id"]}),$(`${s} .ga-loader-container`).hide()}var Ce=document.querySelector("meta[name=domain]")?.content,Me=["all","playstation","xbox","steam"];async function k(e,t="",{gameId:s}){let o=$(e).prop("outerHTML");Me.forEach(async a=>{let p=$(`${e} .gas-list-${a}`),m=0;switch(a){case"playstation":m=1;break;case"xbox":m=2;break;case"steam":m=3;break;default:break}let h={gameId:s};m&&(h.type=m),t.length&&(h.q=t);let r=await(await fetch(`https://${Ce}/api/leaderboard${Object.keys(h)?.length?`?${new URLSearchParams(h).toString()}`:""}`)).json();console.info(`=== ${e} results ===`,r);let x=["profileId","name"],i=["totalAchievements","gaPoints"];switch(m){case 1:i.push("silver","bronze","gold","platinum");break;case 2:i.push("gamescore");break;case 3:i.push("games");break}let d=$(".gas-list-empty",p);if(r.count>0&&r.results?.length){let c=p.children().first(),u=$(".gas-list-entry",p).first();u.show(),o=u.prop("outerHTML"),p.html(c).append(u),u.hide(),r.results.forEach((n,f)=>{let l=o;l=l.replaceAll("{|idx|}",f+1),Object.entries(n).forEach(([w,v])=>{if(w==="iconURL"){let y=$(".gas-list-entry-cover",l);y?.length&&v?.length&&(l=L(y,v)||l)}else if(w==="recentlyPlayed"){!m&&v?.platform?.length&&(l=A(v?.platform,l));let y=$(".gas-list-entry-cover-game",l);y?.length&&v?.iconURL?.length&&(l=L(y,v.iconURL)||l)}else x.includes(w)?l=l.replaceAll(`{|${w}|}`,v||""):i.includes(w)&&(l=l.replaceAll(`{|${w}|}`,Math.round(v||0)))}),T(p,l,f)})}else p.html(d),d.show()})}async function de(e,t){O({elemIdPrefix:e,gamehubURL:t},{listName:"reviews",numKeysToReplace:["id","likesCount"],textKeysToReplace:["profileId","name","content","author","classification","updatedAt"],tabs:["all","positive","mixed","negative"],tabMatcher:"classification"})}var He=document.querySelector("meta[name=domain]")?.content,Fe=new URLSearchParams(location.search),K=Fe.get("id")||1044,F=`https://${He}/api/game/${K}`,E="#gas-gh";$(".ga-loader-container").show();$("#ga-sections-container").hide();$(async()=>{await auth0Bootstrap();let e=await ie(F,K);if(e){le(F,token,e),J(`${E}-leaderboard`,k,{gameId:K}),await Promise.all([await ae(e,F),await k(`${E}-leaderboard`,"",{gameId:K}),await me(E,F),await de(E,F),await re(F),await he(e)]),$(".ga-loader-container").hide(),$("#ga-sections-container").show(),$("#gas-wf-tab-activator").click();return}});})();
