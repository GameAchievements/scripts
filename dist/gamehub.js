(()=>{var C=e=>{let o=s=>`0${s}`.slice(-2),t=new Date(e);return`${t.getFullYear()} . ${o(t.getMonth()+1)} . ${o(t.getDate())}`},K=e=>{let o=s=>`0${s}`.slice(-2),t=new Date(e);return`${o(t.getHours())}h${o(t.getMinutes())}`},G=e=>{let o=new Date(e),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=`${o.getDate()} ${t[o.getMonth()]}, ${o.getFullYear()}`,a=o.toLocaleTimeString().toLowerCase();return{date:s,time:a}};var P=e=>{switch(e){case"playstation":return 1;case"xbox":return 2;default:return 3}};var V=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var S=e=>e?.includes("steamstatic")||e?.includes("steampowered"),W=e=>e?.includes("images-eds.xboxlive.com");var F=e=>{if(!e)return"N.A.";let o=e.lastIndexOf(" | ");return o>0?e.slice(0,o):e};var se=e=>{if(e<25)return"common";if(e<50)return"rare";if(e<75)return"very-rare";if(e>=75)return"ultra-rare"},q=(e,o,t=".hero-section-achievement")=>{let s=o,a=se(e);return s=$(".rarity-tag-wrapper",s).children(`:not(.gas-rarity-tag-${a})`).hide().parents(t).prop("outerHTML"),s};var A=(e,o,t,s=!1)=>{e.append(o).children().last().removeClass(["bg-light","bg-dark","locked","unlocked"]).addClass(`bg-${t%2>0?"light":"dark"}`).addClass(`${s?"unlocked":"locked"}`)};var L=(e,o,t=".gas-list-entry")=>{let s=o,a={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return a.ps.rgx.test(e)&&(s=$(".gas-platform-psn",s).css("display","inherit").parents(t).prop("outerHTML")),a.steam.rgx.test(e)&&(s=$(".gas-platform-steam",s).css("display","inherit").parents(t).prop("outerHTML")),a.xbox.rgx.test(e)&&(s=$(".gas-platform-xbox",s).css("display","inherit").parents(t).prop("outerHTML")),s};var B=(e,o,t=".gh-row")=>{let s=o,a=e?.unlocked;return a&&(s=s.replaceAll("{|unlockedAt|}",`${K(e.unlockedAt)}<br />${C(e.unlockedAt)}`)),s=$(".status-wrapper",s).children(`:not(.${a?"unlocked":"locked"}-status)`).hide().parents(t).prop("outerHTML"),s};var _=(e,o,t=".gh-row")=>{let s=o;return s=$(".trophy-wrapper",s).children(`:not(.trophy-${e.toLowerCase()})`).hide().parents(t).prop("outerHTML"),s};var T=(e,o,t=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",o).parents(t).prop("outerHTML");var E=(e,o)=>{let t=o,s=rarityClassCalc(e);return t=t.replaceAll("{|rarity|}",s.replace("-"," ")),t=$(".gas-rarity-tag",t).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${s}`).children(".p1").addClass(s).parents(".gas-list-entry").prop("outerHTML"),t};var z=(e,o,t={})=>{$(`${e} .search-input`).removeAttr("required"),$(`${e} form.search`).on("submit",async function(s){s.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),$(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await o(e,searchTerm,t),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()})};function J(e){switch(e){case 1:return"#FF6C6C";case 2:return"#FF876C";case 3:return"#FFB36C";case 4:return"#FFD66C";case 5:return"#D0FF6C";case 6:return"#6CFFCA";case 7:return"#69E4FF";case 8:return"#99A3FF";case 9:return"#C699FF";case 10:return"#FFA0EA";default:return"#5663BA"}}function oe(e=""){return`<svg ${e} viewBox="0 0 400 283" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M396.063 200.058C387.286 177.198 388.232 171.375 363.69 113.777C342.879 64.745 324.486 39.1518 302.256 32.5827V16.449C302.256 7.35738 294.899 0 285.807 0H260.74C251.648 0 244.291 7.35738 244.291 16.449V30.7959H155.687V16.449C155.687 7.35738 148.277 0 139.238 0H114.17C105.079 0 97.7212 7.35738 97.7212 16.449V32.5827C75.4388 39.1518 57.098 64.745 36.2345 113.777C11.6925 171.427 12.5859 177.25 3.80958 200.058C-4.91416 222.919 0.341103 257.656 30.0859 275.104C59.8833 292.499 89.6806 279.36 114.17 246.568C138.712 213.775 148.329 215.414 169.35 215.414H230.679C251.701 215.414 261.265 213.775 285.807 246.568C310.297 279.36 340.094 292.446 369.891 275.104C399.636 257.709 404.944 222.919 396.168 200.058H396.063Z" />
    </svg>`}function D(){$("svg",this).css("fill",J(Number($(this).data("rate")))),$("p",this).show()}function X(){$("svg",this).css("fill","#5663BA"),$("p",this).hide()}function Q(e,o){for(let t=1;t<11;t++)e.append(`<li data-rate="${t}" role="button"><p>${t}</p>${oe()}</li>`);$("li",e).click(function(){$(this).siblings().removeClass("rating-active"),$(this).addClass("rating-active");let t=Number($(this).data("rate"));o.data("rate",t).text(`${t}/10`).css("color",J(t))}),$("li",e).on("mouseenter",function(){D.apply(this),$(this).nextAll().each(X),$(this).prevAll().each(D)}),$("li",e).on("mouseleave",()=>{let t=$(".rating-active",e);t.length?(D.apply(t),t.prevAll().each(D),t.nextAll().each(X)):$("li",e).each(X)})}function R(e){return oe(`class="bg-review-score" fill="${J(e)}"`)}var ue="#gas-gh";function ge({listsData:e,elemId:o,numKeysToReplace:t,textKeysToReplace:s}){console.info(`=== ${o} results ===`,e),$(`${o} .gas-list-first, ${o} .gas-list-latest`).each((p,m)=>{let d=$(m),u=d.prop("outerHTML"),r=$(".gas-list-empty",d),v=d.children().first(),i=$(".gas-list-entry",d).first();d.html(v);let h=e[p===0?"firstAchievers":"latestAchievers"];h?.length>0?(i.show(),d.append(i),u=i.prop("outerHTML"),i.hide(),h.forEach((c,f)=>{let n=u;for(let[g,l]of Object.entries(c)){let w=$(".gas-list-entry-cover",n);if(w&&c.iconURL?.length&&(n=T(w,c.avatar)||n),n=n.replaceAll("{|idx|}",f+1),g==="unlockedAt"){let{date:y,time:x}=G(l);n=n.replaceAll("{|unlockedDt|}",y||"N.A."),n=n.replaceAll(`{|${g}|}`,x||"N.A.")}else s.includes(g)?n=n.replaceAll(`{|${g}|}`,l||""):t.includes(g)&&(n=n.replaceAll(`{|${g}|}`,Math.round(l||0)))}A(d,n,f)})):(d.append(r),r.show())})}async function fe({gamehubURL:e},{listName:o,numKeysToReplace:t,textKeysToReplace:s}){let a=`${ue}-${o}`,m=await(await fetch(`${e}/${o}`)).json();ge({listsData:m,elemId:a,numKeysToReplace:t,textKeysToReplace:s})}async function ae(e){await fe({gamehubURL:e},{listName:"achievers",numKeysToReplace:["id","achievementId"],textKeysToReplace:["profileId","achievementName","playerName","name"]})}var $e="#gas-gh",we=document.querySelector("meta[name=domain]")?.content;async function Y(e,o){let t=`${$e}-achievements`,s=$(`${t} .ga-loader-container`);$(`${t} .achievement-table`).hide();let a=$(`${t} .${o===1?"psn":"xbox"}-achievement-list`),p=$(`${t} .empty-state`);p.hide(),a.hide(),s.show();let m={Authorization:`Bearer ${token}`},u=await(await fetch(`https://${we}/api/game/${e}/achievements${o?`?platform=${o}`:""}`,{headers:token?m:{}})).json();console.info(`=== ${t} results ===`,u);let r=["name","description"],v=["id","score","achieversCount","gAPoints"],i=a.parent(),h=a.children().first(),c=$(".gh-row",a).first();c.show();let f=c.prop("outerHTML");a.html(h).append(c),u.length>0?(c.hide(),u.forEach((n,g)=>{let l=f;for(let[w,y]of Object.entries(n)){let x=$(".gas-list-entry-cover",l);x&&n.iconURL?.length&&(l=T(x,n.iconURL,".gh-row")||l),w==="name"?l=l.replaceAll("{|name|}",F(y)||"N.A."):r.includes(w)?l=l.replaceAll(`{|${w}|}`,(w.endsWith("At")?gaDate(y):y)||""):v.includes(w)?l=l.replaceAll(`{|${w}|}`,Math.round(y||0)):w==="rarity"?l=q(y,l,".gh-row"):w==="trophyType"&&o===1?l=_(y,l):(w==="userProgress"||!n.userProgress)&&(l=B(y,l))}A(a,l,g,n.userProgress?.unlocked)}),s.hide(),i.removeClass("hidden"),a.css({display:"flex","flex-direction":"column"}),p.hide()):(s.hide(),a.hide(),p.show())}var ve="#gas-gh",M="#gas-gh-versions-dropdown";async function ye(e){let o=$(e.target);$(`${M}-options,${M}-toggle`).removeClass("w--open");let t=Number(o.data("version-id")),s=Number(P(o.data("platform")?.toLowerCase())||0);$(`${M}-text-selected`).text(o.text()),Y(t,s)}async function re(e,o){let t="versions",s=`${ve}-${t}`;if(!e.versionDetails){let h=e.platforms??e.importedFromPlatforms,c=Number(h?.length>=1?P(h[0].toLowerCase()):0);return $(M).remove(),Y(e.id,c)}let p=await(await fetch(`${o}/${t}`)).json(),m=["achievementsCount"],d=["gameId","externalGameId","region"];console.info(`=== ${s} results ===`,p);let u=$(s).prop("outerHTML"),r=$(`${s} .gas-list`),v=$(`${s} .heading-description-wrapper`).children().last(),i=v.prop("outerHTML");if(i&&(i=i.replaceAll("{|name|}",e.name),v.prop("outerHTML",i)),p.length){let h=r.children().first(),c=$(".gas-list-entry",r).first();c.show(),u=c.prop("outerHTML"),r.html(h).append(c),c.hide();let f="gas-version-option",n=$(`${M}-options`).children().first();n.addClass(f),p.forEach((g,l)=>{let w=n.clone(),y=g.consoles[0]+(g.region?` \u2014 ${g.region} `:"");w.data("version-id",g.gameId).data("version-external-id",g.externalGameId).data("platform",g.platform).text((g.name?.length?`${g.name} | `:"")+y),$(`${M}-options`).append(w);let x=u;for(let[b,I]of Object.entries(g))d.includes(b)?x=x.replaceAll(`{|${b}|}`,I||"?"):m.includes(b)?x=x.replaceAll(`{|${b}|}`,Math.round(I||0)):b==="name"?x=x.replaceAll(`{|${b}|}`,g.name?.length?g.name:y):b==="platform"?x=L(I,x):b==="consoles"&&(x=$(".gas-console-tags",x).html(I.map(ee=>{let te=ee.toLowerCase();return`<div class="console-${te.startsWith("ps")?"playstation":te.slice(0,4)}">${ee}</div>`})).parents(".gas-list-entry").prop("outerHTML"));A(r,x,l)}),n.remove(),$(`.${f}`).on("click",ye)}r.css("display","flex"),$(`${s}-tab .gas-list-empty`).show(),$(`${s},${s}-tab-btn`).css("display","flex")}var U="#gas-gh";function ne(e,o){let t=$(o),s=t.prop("outerHTML");console.info(`=== ${o} ===`,e);let a=["name","igdbId","description"],p=["ownersCount","achievementsCount","gaReviewScore","versionsCount","completion"],m=["releaseDate"],d=[],u=["developers","publishers","franchises","engines","modes","genres","themes","series","supportedLanguages","playerPerspectives"],r=[...a,...m],v=[...p,...d];o.endsWith("top")&&(e.coverURL||e.imageURL)?.length&&(s=t.css("background-image",`linear-gradient(rgba(255,255,255,0),#030922),
          linear-gradient(rgba(70,89,255,.4),rgba(70,89,255,.4)),
          url(${e.coverURL||e.imageURL})`).prop("outerHTML")),$(".gas-img",s).each((c,f)=>{e.imageURL?.length&&(s=T($(f),e.imageURL,o)||s)});for(let[c,f]of Object.entries(e))r.find(n=>n.toLowerCase()===c.toLowerCase())?s=s.replaceAll(`{|${c}|}`,f?.length?c.endsWith("Date")?C(f):f:"N.A."):v.find(n=>n.toLowerCase()===c.toLowerCase())?s=s.replaceAll(`{|${c}|}`,Math.round(f||0)):c==="platformsInGACount"&&o.endsWith("top")?s=L(f?.length?f:e.importedFromPlatforms,s,o):u.includes(c)&&(s=s.replaceAll(`{|${c}|}`,f?.length?f.join(", "):"N.A."));t.prop("outerHTML",s);let i=Object.keys(e),h=[...p,...r,...u].filter(c=>!i.includes(c));for(let c of h)$(`div:contains({|${c}|})`).parent(".entry-wrapper").remove();o.endsWith("about")&&h.length>0&&$(".about-game-entry-div").each(function(){$(this).find(".entry-wrapper").length===0&&$(this).remove()})}async function ie(e,o){let t=await fetch(e);if(!t.ok){location.replace("/games");return}let s=await t.json();if(Object.keys(s).length>0&&s.id){if(s.versionDetails&&s.versionDetails.defaultVersion!==Number(o)){location.replace(`/game?id=${s.versionDetails.defaultVersion}`);return}if(document.title=`${s.name?.length?s.name:s.id} | ${document.title}`,s.igdbId?.length)for(let a of["top","about"])ne(s,`${U}-${a}`);else $(`${U}-about,${U}-igdb-id,[href="${U}-about"]`).remove(),ne(s,`${U}-top`)}return s}var k="#gas-gh";function xe(e){if($("#official-review-game-title").text(e.name),$(`${k}-top-ga-score`).prepend(R(0)),$(`${k}-top-ga-score-text`).text("-"),!e?.gaReviewURL?.length)return;let o=`${k}-official-review`;if($(o).css("display","flex"),$(`${o}-placeholder`).hide(),$(`${o}-url`).attr("href",e.gaReviewURL),e?.gaReviewSummary?.length&&$(`${o}-summary`).text(e.gaReviewSummary),e?.gaReviewScore){let t=Math.round(e.gaReviewScore),s=R(t);$(`${o}-score-text`).text(t),$(`${o}-score-bg`).replaceWith(s),$(`${k}-top-ga-score .bg-review-score`).replaceWith(s),$(`${k}-top-ga-score-text`).text(t)}else $(`${o}-score`).parent().remove()}async function Te(e,o){let t=`${k}-review-form`;if((await fetch(`${e}/review`,{headers:{Authorization:`Bearer ${o}`}})).status===200){$(t).remove();return}let a=$(".submit-button",t);a.attr("disabled",!0);let p=$("[name=title]",t),m=$("[name=content]",t),d=$("[name][required]",t),u=a.val(),r=$(".gas-form-error",t),v=$("div",r),i=r.text(),h=$(".gas-form-success",t),c=$(".gas-rating-scale",t),f=$(".gas-rating-selected",t);Q(c,f);let n=!1,g=()=>{n&&Number(f.data("rate"))&&a.removeClass("disabled-button").attr("disabled",!1)};d.on("focusout keyup",()=>{d.each(function(){$(this).val()?.length?(n=!0,$(this).prev("label").removeClass("field-label-missing")):(n=!1,$(this).prev("label").addClass("field-label-missing"),a.addClass("disabled-button").attr("disabled",!0))}),g()}),$("li",c).one("click",()=>{c.parent().prev("label").removeClass("field-label-missing"),g()}),a.on("click",async l=>{l.preventDefault();let w=Number(f.data("rate")||0);if(!w||!p.val()?.length||!m.val().length){r.show(),v.text("Please choose a rating and fill-in required fields"),setTimeout(()=>{r.hide(),v.text(i)},formMessageDelay);return}isUserInputActive=!1,$("input",t).attr("disabled",!0),a.val(a.data("wait"));let y={title:p.val(),content:m.val(),rating:w},x=await fetch(`${e}/review`,{method:"POST",headers:{Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(y)}),b=await x.json();if(x.status!==201){r.show(),v.text(b?.message),setTimeout(()=>{r.hide(),v.text(i),$("input",t).attr("disabled",!1),a.val(u)},formMessageDelay);return}$("form",t).hide(),h.attr("title",b?.message).show(),setTimeout(()=>{location.reload()},formMessageDelay)})}async function le(e,o,t){xe(t),await Te(e,o)}function ce({listData:e,elemId:o}){let t=$(`${o}-bars`),s=[],a=["positive","mixed","negative"];if(e.length){for(let m of a){s=e.filter(r=>r.classification?.toLowerCase()===m);let d=$(`.gas-bar-${m}`,t);d.length&&d.css("width",`${100*(s.length/e.length)||1}%`);let u=$(`.gas-bar-text-${m}`,t);u.length&&u.text(s?.length)}let p=Math.round(e.map(m=>m.rating).reduce((m,d)=>m+d)/e.length);$(".gas-avg-rate-wrapper").each((m,d)=>{$(d).prepend(R(p)),$(".gas-avg-rate-text",d).text(p)})}else{for(let p of a)$(`.gas-bar-${p}`,t).css("width","1%");$(".gas-avg-rate-wrapper").each((p,m)=>{$(m).prepend(R(0)),$(".gas-avg-rate-text",m).text("-")})}}var be=["all","playstation","xbox","steam"];function pe({listData:e,elemId:o,numKeysToReplace:t,textKeysToReplace:s,tabCounts:a,tabMatcher:p}){let m=$(`${o} .gas-list-tabs`);console.info(`=== ${o} results ===`,e);let d=m.prop("outerHTML");if(!a){p="platform",a={all:e.length,playstation:e.filter(u=>u[p].toLowerCase()==="playstation")?.length,xbox:e.filter(u=>u[p].toLowerCase()==="xbox")?.length,steam:e.filter(u=>u[p].toLowerCase()==="steam")?.length};for(let u of be)d=d.replaceAll(`{|${u}Cnt|}`,a[u])||"0"}m.prop("outerHTML",d);for(let u of Object.keys(a)){let r=$(`${o} .gas-list-${u}`),v=$(".gas-list-empty",r);if(a[u]>0){let i=r.children().first(),h=$(".gas-list-entry",r).first();h.show(),d=h.prop("outerHTML"),r.html(i).append(h),h.hide(),(u==="all"?e:e.filter(c=>c[p]?.toLowerCase()===u)).forEach((c,f)=>{let n=d;for(let[g,l]of Object.entries(c)){let w=$(".gas-list-entry-cover",n);if(w&&c.iconURL?.length&&(n=T(w,c.iconURL)||n),o.endsWith("achievements")&&g==="name")n=n.replaceAll("{|name|}",F(l)||"N.A.");else if(s.includes(g))n=n.replaceAll(`{|${g}|}`,(g.endsWith("At")?C(l):l)||"");else if(t.includes(g))n=n.replaceAll(`{|${g}|}`,Math.round(l||0));else if(g==="rating"){n=n.replaceAll(`{|${g}|}`,Math.round(l||0));let y=$(".gas-list-entry-rating",n);y.length&&(n=y.prepend(R(l)).parents(".gas-list-entry").prop("outerHTML"))}else g==="platform"?n=L(l,n):g==="rarity"&&(n=E(l,n))}A(r,n,f)})}else r.html(v),v.show()}}async function N({elemIdPrefix:e,gamehubURL:o},{listName:t,numKeysToReplace:s,textKeysToReplace:a,tabs:p,tabMatcher:m}){let d=`${e}-${t}`,r=await(await fetch(`${o}/${t}`)).json();if(Array.isArray(r)||r.length>0){let v;if(Array.isArray(p)){v={};for(let i of p)v[i]=i==="all"?r.length:r.filter(h=>h[m]?.toLowerCase()===i)?.length}switch(t){case"reviews":ce({listData:r,elemId:d}),$(".gas-count-reviews").each((i,h)=>{$(h).text($(h).text().replace("{|reviewsCnt|}",r.length)),i>0&&$(h).text($(h).text().replace(`{|${p[i]}ReviewsCnt|}`,v[p[i]]))});break;case"guides":$(`${e}-top .gas-count-guides`).text(r.length);break;default:break}pe({listData:r,elemId:d,numKeysToReplace:s,textKeysToReplace:a,tabCounts:v,tabMatcher:m})}}async function me(e,o){await N({elemIdPrefix:e,gamehubURL:o},{listName:"guides",numKeysToReplace:["id","commentsCount","viewsCount","likesCount"],textKeysToReplace:["profileId","name","description","author","updatedAt"]})}var Ae="#gas-gh",Le=document.querySelector("meta[name=forum-domain]")?.content;function Ce({gamehubData:e},{listData:o,elemId:t,numKeysToReplace:s,textKeysToReplace:a}){console.info(`=== ${t} results ===`,o);let p=$(t).prop("outerHTML"),m=$(`${t} .gas-list`),d=$(`${t} .gas-list-empty`),u=$(".gas-list-entry",m).first();if(u.show(),p=u.prop("outerHTML"),u.hide(),o?.length&&p?.length)m.html(u),o.forEach((r,v)=>{let i=p;i=i.replaceAll("{|idx|}",v+1);for(let[h,c]of Object.entries(r)){if(r.gameIconURL?.length&&!S(r.gameIconURL)){let f=$(".gas-list-entry-cover-game",i);f?.length&&(i=T(f,r.gameIconURL)||i)}if((r.iconURL?.length||r.imageURL?.length)&&!W(r.imageURL)&&!S(r.imageURL)&&!S(r.iconURL)){let f=$(".gas-list-entry-cover",i);f?.length&&(i=t.includes("list-games")?f.css("background-image",`url(${r.imageURL})`).parents(".gas-list-entry").prop("outerHTML"):T(f,r.iconURL||r.imageURL)||i)}a.includes(h)?i=i.replaceAll(`{|${h}|}`,(h.endsWith("At")?C(c):V(c))||""):s.includes(h)?i=i.replaceAll(`{|${h}|}`,Math.round(c||0)):h==="lastPlayed"?i=i.replaceAll(`{|${h}|}`,C(c)):(h==="importedFromPlatform"||h==="platform")&&(i=L(c,i))}m.append(i)});else{o?.length&&!p?.length&&console.error(`${t} template issue (missing a '.gas-' class?)`);let r=d.children().first(),v=r.prop("outerHTML").replaceAll("{|name|}",e.name);r=r.prop("outerHTML",v),$(t).html(d),d.show()}m.css("display","flex")}async function de(e){let o=[],t=`${Ae}-forum-threads`;if(e.forumCategoryID){let s=await fetch(`https://${Le}/api/category/${e.forumCategoryID}`);s.ok&&(o=(await s.json()).topics.slice(0,5)),o=o.map(a=>({id:a.cid,title:a.title,topic_id:a.tid,author_name:a.user.username,imageURL:a.user.picture?.toLowerCase().includes("http")?new DOMParser().parseFromString(a.user.picture,"text/html").documentElement.textContent:"https://uploads-ssl.webflow.com/6455fdc10a7247f51c568c32/64b50ee999d75d5f75a28b08_user%20avatar%20default.svg",category_name:a.category.name,category_id:a.category.cid,views:a.viewcount,upvotes:a.upvotes,replies:a.postcount}))}Ce({gamehubData:e},{listData:o,elemId:t,numKeysToReplace:["replies","views","upvotes"],textKeysToReplace:["title","author_name","category_name","topic_id","category_id"]}),$(`${t} .ga-loader-container`).hide()}var Re=document.querySelector("meta[name=domain]")?.content,Me=["all","playstation","xbox","steam"];async function Z(e,o="",{gameId:t}){let s=$(e).prop("outerHTML");for(let a of Me){let p=$(`${e} .gas-list-${a}`),m=0;switch(a){case"playstation":m=1;break;case"xbox":m=2;break;case"steam":m=3;break;default:break}let d={gameId:t};m&&(d.type=m),o.length&&(d.q=o);let r=await(await fetch(`https://${Re}/api/leaderboard${Object.keys(d)?.length?`?${new URLSearchParams(d).toString()}`:""}`)).json();console.info(`=== ${e} results ===`,r);let v=["profileId","name"],i=["totalAchievements","gaPoints"];switch(m){case 1:i.push("silver","bronze","gold","platinum");break;case 2:i.push("gamescore");break;case 3:i.push("games");break}let h=$(".gas-list-empty",p);if(r.count>0&&r.results?.length){let c=p.children().first(),f=$(".gas-list-entry",p).first();f.show(),s=f.prop("outerHTML"),p.html(c).append(f),f.hide(),r.results.forEach((n,g)=>{let l=s;l=l.replaceAll("{|idx|}",g+1);for(let[w,y]of Object.entries(n))if(w==="iconURL"){let x=$(".gas-list-entry-cover",l);x?.length&&y?.length&&(l=T(x,y)||l)}else if(w==="recentlyPlayed"){!m&&y?.platform?.length&&(l=L(y?.platform,l));let x=$(".gas-list-entry-cover-game",l);x?.length&&y?.iconURL?.length&&(l=T(x,y.iconURL)||l)}else v.includes(w)?l=l.replaceAll(`{|${w}|}`,y||""):i.includes(w)&&(l=l.replaceAll(`{|${w}|}`,Math.round(y||0)));A(p,l,g)})}else p.html(h),h.show()}}async function he(e,o){N({elemIdPrefix:e,gamehubURL:o},{listName:"reviews",numKeysToReplace:["id","likesCount"],textKeysToReplace:["profileId","name","content","author","classification","updatedAt"],tabs:["all","positive","mixed","negative"],tabMatcher:"classification"})}var ke=document.querySelector("meta[name=domain]")?.content,He=new URLSearchParams(location.search),j=He.get("id")||1044,H=`https://${ke}/api/game/${j}`,O="#gas-gh";$(".ga-loader-container").show();$("#ga-sections-container").hide();$(async()=>{await auth0Bootstrap();let e=await ie(H,j);if(e){le(H,token,e),z(`${O}-leaderboard`,Z,{gameId:j}),await Promise.all([await re(e,H),await Z(`${O}-leaderboard`,"",{gameId:j}),await me(O,H),await he(O,H),await ae(H),await de(e)]),$(".ga-loader-container").hide(),$("#ga-sections-container").show(),$("#gas-wf-tab-activator").click();return}});})();
