(()=>{var m=e=>{let t=a=>`0${a}`.slice(-2),r=new Date(e);return`${r.getFullYear()} . ${t(r.getMonth()+1)} . ${t(r.getDate())}`};var h=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var u=e=>e?.includes("steamstatic")||e?.includes("steampowered");var d=e=>{if(!e)return"N.A.";let t=e.lastIndexOf(" | ");return t>0?e.slice(0,t):e};var f=(e,t,r=".gas-list-entry")=>{let a=t,o={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return o.ps.rgx.test(e)&&(a=$(".gas-platform-psn",a).css("display","inherit").parents(r).prop("outerHTML")),o.steam.rgx.test(e)&&(a=$(".gas-platform-steam",a).css("display","inherit").parents(r).prop("outerHTML")),o.xbox.rgx.test(e)&&(a=$(".gas-platform-xbox",a).css("display","inherit").parents(r).prop("outerHTML")),a};var g=(e,t,r=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(r).prop("outerHTML");var x=(e,t,r={})=>{$(`${e} form.search`).on("submit",async function(a){a.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,r),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};function v({listData:e,elemId:t,numKeysToReplace:r,textKeysToReplace:a}){let o=$(t).prop("outerHTML"),l=$(`${t} .gas-list`),w=$(`${t} .gas-list-empty`);if(e?.length){let c=$(".gas-list-entry",l).first();c.show(),o=c.prop("outerHTML"),c.hide(),l.html(c),e.forEach((n,A)=>{let s=o;s=s.replaceAll("{|idx|}",A+1);for(let[i,p]of Object.entries(n)){if(n.gameIconURL?.length&&!u(n.gameIconURL)){let C=$(".gas-list-entry-cover-game",s);if(C.length){let T=`For achievement: ${d(n.achievementName)}`;s=g(C.attr("alt",T).attr("title",T),n.gameIconURL)||s}}n.iconURL?.length&&!u(n.iconURL)&&($entryImg=$(".gas-list-entry-cover",s),$entryImg.length&&n.iconURL?.length&&(s=g($entryImg,n.iconURL)||s)),a.includes(i)?s=s.replaceAll(`{|${i}|}`,(i.endsWith("At")?m(p):h(p))||""):r.includes(i)?s=s.replaceAll(`{|${i}|}`,Math.round(p||0)):i==="platform"&&(s=f(p,s))}l.append(s)})}else $(t).html(w),w.show();l.css("display","flex")}var M=document.querySelector("meta[name=domain]")?.content;async function y(e,t=""){let r={};t.length&&(r.q=t);let o=await(await fetch(`https://${M}/api/guide/list${Object.keys(r)?.length?`?${new URLSearchParams(r).toString()}`:""}`)).json();$(`${e} .gas-list-results-info`).text(`${o?.count||0} result(s)`),v({listData:o.results,elemId:e,numKeysToReplace:["likes","comments"],textKeysToReplace:["id","name","author","description","achievementId","achievementName","profileId"]})}var b="#gas-list-guides";$().ready(async()=>{await auth0Bootstrap(),x(b,y),await y(b),$(".ga-loader-container").hide()});})();
