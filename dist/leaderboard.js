(()=>{var g=(e,t,s=".gas-list-entry")=>{let a={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return a.ps.rgx.test(e)&&(t=$(".gas-platform-psn",t).css("display","inherit").parents(s).prop("outerHTML")),a.steam.rgx.test(e)&&(t=$(".gas-platform-steam",t).css("display","inherit").parents(s).prop("outerHTML")),a.xbox.rgx.test(e)&&(t=$(".gas-platform-xbox",t).css("display","inherit").parents(s).prop("outerHTML")),t};var h=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var m=(e,t,s={})=>{$(`${e} form.search`).on("submit",async function(a){a.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};var d,w,f;function y({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:a}){console.info(`=== ${t} results ===`,e);let p=$(t).prop("outerHTML"),o=$(`${t} .gas-list`);d||(f=$(".gas-list-empty",o),w=o.children().first(),d=$(".gas-list-entry",o).first().clone(),$(".gas-list-entry",o).first().remove()),e?.length?(p=d.prop("outerHTML"),o.html(w),e.forEach((C,x)=>{let r=p;r=r.replaceAll("{|idx|}",x+1),Object.entries(C).forEach(([n,i])=>{if(n==="iconURL"){let c=$(".gas-list-entry-cover",r);c?.length&&i?.length&&(r=h(c,i)||r)}else if(n==="recentlyPlayed"){!l()&&i?.platform?.length&&(r=g(i?.platform,r));let c=$(".gas-list-entry-cover-game",r);c?.length&&i?.iconURL?.length&&(r=h(c,i.iconURL)||r)}else a.includes(n)?r=r.replaceAll(`{|${n}|}`,i||""):s.includes(n)&&(r=r.replaceAll(`{|${n}|}`,Math.round(i||0)))}),o.append(r).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${x%2>0?"light":"dark"}`)})):(o.html(f),f.show()),o.css("display","flex")}var L=document.querySelector("meta[name=domain]")?.content,l=()=>{switch(window.location.pathname){case"/playstation-leaderboard":return 1;case"/xbox-leaderboard":return 2;case"/steam-leaderboard":return 3;default:return}};async function u(e,t=""){let s={};l()&&(s.type=l()),t.length&&(s.q=t);let p=await(await fetch(`https://${L}/api/leaderboard${Object.keys(s)?.length?`?${new URLSearchParams(s).toString()}`:""}`)).json(),o=["totalAchievements","gaPoints"];switch(l()){case 1:o.push("silver","bronze","gold","platinum");break;case 2:o.push("gamescore");break;case 3:o.push("games");break}y({listData:p.results,elemId:e,numKeysToReplace:o,textKeysToReplace:["profileId","name"]})}$(".ga-loader-container").show();$("#ga-sections-container").hide();$(async()=>{let e="#gas-leaderboard";await auth0Bootstrap(),m(e,u),await u(e),$(".ga-loader-container").hide(),$("#ga-sections-container").show()});})();
