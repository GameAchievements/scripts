(()=>{function F(e,t,s){$(".gas-filters-sw-li.btn-page",$(e)).remove(),$(".btn-ellipsis",$(e)).remove();let r=$(".gas-filters-sw-li.duplicate-btn",$(e));t===1&&$("#btn-page-next").addClass("disabled");let o=t>s?s-1:t;for(let i=1;i<=t;i++){let p=i>=o&&i!==t;P(r,i,p?"hidden":"",{place:"before",elementId:"#btn-page-next"}),i===t&&t>s&&h({place:"before",elementId:`#btn-page-${i}`})}}function P(e,t,s,r={place:"before",elementId:"#btn-page-next"}){let a=e.clone();a.text(t).removeClass("duplicate-btn").addClass(`btn-page ${s??""}`).attr("id",`btn-page-${t}`),r.place==="before"?a.insertBefore(r.elementId):a.insertAfter(r.elementId)}function h(e={place:"before",elementId:"#btn-page-next"}){let t=$('<span class="btn-ellipsis">...</span>');e.place==="before"?t.insertBefore(e.elementId):t.insertAfter(e.elementId)}var H=1,x=5;function k(e,t,s){let r=t-x+1,a=e<=x-1,o=e>=r+1,i=-1;$(".btn-ellipsis",$(s)).remove(),$(".gas-filters-sw",$(s)).children(":not(#btn-page-previous):not(#btn-page-next):not(.duplicate-btn)").each((p,l)=>{let n=p+1,c=$(l);n===1||n===t||a&&n<=x||o&&n>=r||n===e-H||n===e||n===e+H?c.removeClass("hidden"):(c.addClass("hidden"),(i===-1||!a&&!o&&$("span.btn-ellipsis",s).length<2&&n>e)&&(i=n,h({place:"after",elementId:l})))})}async function S(e,t,s,r){let a=$(".gas-filters-sw-li.active",$(e)).first().text();console.log("currentPage",a);let o=s.target.innerText.toLowerCase()==="next"?Number(a)+1:s.target.innerText.toLowerCase()==="previous"?Number(a)-1:Number(s.target.innerText);$(".gas-filters-sw-li:not(.btn-ellipsis)",$(e)).removeClass("active").removeClass("disabled"),$(`#btn-page-${o}`,$(e)).addClass("active"),o===t?$("#btn-page-next",$(e)).addClass("disabled"):o===1&&$("#btn-page-previous",$(e)).addClass("disabled"),k(Number(o),t,e),await r()}function w({elemId:e,fetchFn:t,pageBreakpoint:s,totalPages:r}){$(`${e} .gas-filters-sw-li`).off("click"),F(e,r,s),$(`${e} .gas-filters-sw-li`).on("click",a=>{console.log("here"),S(e,r,a,()=>t())}),$("#btn-page-1").addClass("active")}var d=e=>{let t=r=>`0${r}`.slice(-2),s=new Date(e);return`${s.getFullYear()} . ${t(s.getMonth()+1)} . ${t(s.getDate())}`};var b=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var C=e=>e?.includes("steamstatic")||e?.includes("steampowered");var v=(e,t,s=".gas-list-entry")=>{let r=t,a={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return a.ps.rgx.test(e)&&(r=$(".gas-platform-psn",r).css("display","inherit").parents(s).prop("outerHTML")),a.steam.rgx.test(e)&&(r=$(".gas-platform-steam",r).css("display","inherit").parents(s).prop("outerHTML")),a.xbox.rgx.test(e)&&(r=$(".gas-platform-xbox",r).css("display","inherit").parents(s).prop("outerHTML")),r};var y=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var T=(e,t,s={})=>{$(`${e} .search-input`).removeAttr("required"),$(`${e} form.search`).on("submit",async function(r){r.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),$(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()})};var A,D,M;function R({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:r}){console.info(`=== ${t} results ===`,e);let a=$(t).prop("outerHTML"),o=$(`${t} .gas-list`);A||(M=$(".gas-list-empty",o),D=o.children().first(),A=$(".gas-list-entry",o).first().clone(),$(".gas-list-entry",o).first().remove()),e.length>0?(a=A.prop("outerHTML"),o.html(D),e.forEach((i,p)=>{let l=a;for(let[n,c]of Object.entries(i)){let f=i.iconURL||i.imageURL;if(f?.length&&!C(f)){let g=$(".gas-list-entry-cover",l);g?.length&&(l=y(g,f)||l)}if(r.includes(n))l=l.replaceAll(`{|${n}|}`,(n.endsWith("At")?d(c):b(c))||"");else if(s.includes(n))l=l.replaceAll(`{|${n}|}`,Math.round(c||0));else if(n==="importedFromPlatform"||n==="platform")l=v(c,l);else if(n==="consoles"&&c?.length&&!c.includes("PC")){let g=$(`.gas-tags-${n}`,l);g?.length&&(l=g.html(c.map(L=>`<div class="console-tag" title="${L}"><div class="gas-text-overflow">${L}</div></div>`).join(`
`)).parents(".gas-list-entry").prop("outerHTML"))}}o.append(l).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${p%2>0?"light":"dark"}`)})):(o.html(M),M.show()),o.css("display","flex")}var u=1,O=7,B=20,G=document.querySelector("meta[name=domain]")?.content;async function m(e,t=""){let s=$(`${e}-pagination .gas-filters-sw-li.active`).text()||1,r=$(`${e} .gas-filters-sw-li.active`).first().text(),a={};r!=="All"&&(a.startsWith=r),t.length&&(a.q=t);let o=`https://${G}/api/game/list?perPage=${B}&offset=${s-1}${Object.keys(a)?.length?`&${new URLSearchParams(a).toString()}`:""}`,i=await fetch(o),p=[],l=u;if(i.ok){let n=await i.json();u=Math.ceil((n?.count||1)/B),p=n.results}$(`${e} .gas-list-results-info`).text(`${p?.length||0} result(s)`),l!==u&&$(`${e} .gas-list-total-pages-info`).text(u),R({listData:p,elemId:e,numKeysToReplace:["completion","achievementsCount"],textKeysToReplace:["id","name","description","updatedAt"]})}async function N(e){await m(e),w({elemId:`${e}-pagination`,fetchFn:()=>m(e),pageBreakpoint:O,totalPages:u}),j(e)}function j(e){let t=$(".gas-list-total-pages-info"),s=window.MutationObserver,r=new s(a);t.each(function(){r.observe(this,{childList:!0})});function a(o){for(let i of o)if(i.addedNodes.length>0){let p=Number(i.addedNodes[0].data);w({elemId:`${e}-pagination`,fetchFn:()=>m(e),pageBreakpoint:O,totalPages:p})}}}async function V(e,t){$(".gas-filters-sw-li",$(e)).filter(function(){return $(this).parents(`${e}-pagination`).length===0}).removeClass("active"),$(t.target).addClass("active"),$(".ga-loader-container",$(e)).show(),$(".gas-list,.gas-list-results-info",e).hide(),await m(e),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()}$(async()=>{await auth0Bootstrap();let e="#gas-list-games";$(`${e} .gas-filters-sw-li`).filter(function(){return $(this).parents(`${e}-pagination`).length===0}).on("click",t=>V(e,t)),T(e,m),await N(e),$(".ga-loader-container").hide()});})();
