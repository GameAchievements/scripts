(()=>{var p=e=>{let t=r=>`0${r}`.slice(-2),s=new Date(e);return`${s.getFullYear()} . ${t(s.getMonth()+1)} . ${t(s.getDate())}`};var f=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var u=e=>e?.includes("steamstatic")||e?.includes("steampowered");var d=(e,t,s=".gas-list-entry")=>{let r={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return r.ps.rgx.test(e)&&(t=$(".gas-platform-psn",t).css("display","inherit").parents(s).prop("outerHTML")),r.steam.rgx.test(e)&&(t=$(".gas-platform-steam",t).css("display","inherit").parents(s).prop("outerHTML")),r.xbox.rgx.test(e)&&(t=$(".gas-platform-xbox",t).css("display","inherit").parents(s).prop("outerHTML")),t};var x=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var w=(e,t,s={})=>{$(`${e} form.search`).on("submit",async function(r){r.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};var D=document.querySelector("meta[name=domain]")?.content,C,b,y;function H({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:r}){console.info(`=== ${t} results ===`,e);let g=$(t).prop("outerHTML"),i=$(`${t} .gas-list`);C||(y=$(".gas-list-empty",i),b=i.children().first(),C=$(".gas-list-entry",i).first().clone(),$(".gas-list-entry",i).first().remove()),e.length>0?(g=C.prop("outerHTML"),i.html(b),e.forEach((h,L)=>{let o=g;Object.entries(h).forEach(([a,n])=>{let m=h.iconURL||h.imageURL;if(m?.length&&!u(m)){let c=$(".gas-list-entry-cover",o);c?.length&&(o=x(c,m)||o)}if(r.includes(a))o=o.replaceAll(`{|${a}|}`,(a.endsWith("At")?p(n):f(n))||"");else if(s.includes(a))o=o.replaceAll(`{|${a}|}`,Math.round(n||0));else if(a==="importedFromPlatform")o=d(n,o);else if(a==="consoles"&&n?.length&&!n.includes("PC")){let c=$(`.gas-tags-${a}`,o);c?.length&&(o=c.html(n.map(v=>`<div class="console-tag" title="${v}"><div class="gas-text-overflow">${v}</div></div>`).join(`
`)).parents(".gas-list-entry").prop("outerHTML"))}}),i.append(o).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${L%2>0?"light":"dark"}`)})):(i.html(y),y.show()),i.css("display","flex")}async function l(e,t=""){let s=$(".gas-filters-sw-li.active").first().text(),r={};s!=="All"&&(r.startsWith=s),t.length&&(r.q=t);let i=await(await fetch(`https://${D}/api/game/list${Object.keys(r)?.length?`?${new URLSearchParams(r).toString()}`:""}`)).json();$(`${e} .gas-list-results-info`).text((i?.length||0)+" result(s)"),H({listData:i,elemId:e,numKeysToReplace:["completion","achievementsCount"],textKeysToReplace:["id","name","description","updatedAt"]})}async function F(e,t){$(".gas-filters-sw-li",$(e)).removeClass("active"),$(t.target).addClass("active"),$(".ga-loader-container",$(e)).show(),$(".gas-list,.gas-list-results-info",e).hide(),await l(e),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()}$(async()=>{await auth0Bootstrap();let e="#gas-list-games";$(`${e} .gas-filters-sw-li`).on("click",t=>F(e,t)),w(e,l),await l(e),$(".ga-loader-container").hide()});})();
