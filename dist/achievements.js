(()=>{var p=(t,e,r=".gas-list-entry")=>{let n={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return n.ps.rgx.test(t)&&(e=$(".gas-platform-psn",e).css("display","inherit").parents(r).prop("outerHTML")),n.steam.rgx.test(t)&&(e=$(".gas-platform-steam",e).css("display","inherit").parents(r).prop("outerHTML")),n.xbox.rgx.test(t)&&(e=$(".gas-platform-xbox",e).css("display","inherit").parents(r).prop("outerHTML")),e};var C=document.querySelector("meta[name=domain]")?.content;var f="All",h,x,m;async function v(t,e){$(".gas-filters-sw-li",$(t)).removeClass("active"),$(e.target).addClass("active"),$(".ga-loader-container",$(t)).show(),$(".gas-list,.gas-list-results-info",t).hide(),f=$(e.target).text(),await d(t),$(".gas-list-results-info",t).show(),$(".ga-loader-container").hide()}function b({listData:t,elemId:e,numKeysToReplace:r,textKeysToReplace:n}){console.info(`=== ${e} results ===`,t);let l=$(e).prop("outerHTML"),a=$(`${e} .gas-list`);h||(m=$(".gas-list-empty",a),x=a.children().first(),h=$(".gas-list-entry",a).first().clone(),$(".gas-list-entry",a).first().remove()),t.length>0?(l=h.prop("outerHTML"),a.html(x),t.forEach((c,L)=>{let s=l;Object.entries(c).forEach(([o,i])=>{let g=$(".gas-list-entry-cover-game",s);g?.length&&c.gameIconURL?.length&&(g.removeClass("gas-list-entry-cover"),s=showImageFromSrc(g,c.gameIconURL)||s);let u=$(".gas-list-entry-cover",s),y=c.iconURL||c.imageURL;if(u?.length&&y?.length&&(s=showImageFromSrc(u,y)||s),n.includes(o))s=s.replaceAll(`{|${o}|}`,(o.endsWith("At")?gaDate(i):cleanupDoubleQuotes(i))||"");else if(r.includes(o))s=s.replaceAll(`{|${o}|}`,Math.round(i||0));else if(o==="importedFromPlatform")s=p(i,s);else if(o==="rarityClass"&&(s=s.replaceAll(`{|${o}|}`,i||""),i.toLowerCase()!=="common")){let w=i.replace(" ","-")?.toLowerCase();s=$(".gas-rarity-tag",s).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${w}`).children(".p1").addClass(w).parents(".gas-list-entry").prop("outerHTML")}}),a.append(s).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${L%2>0?"light":"dark"}`)})):(a.html(m),m.show()),a.css("display","flex")}async function d(t,e=""){let r={};f!=="All"&&(r.startsWith=f),e.length&&(r.q=e);let l=await(await fetch(`https://${C}/api/achievement/list${Object.keys(r)?.length?`?${new URLSearchParams(r).toString()}`:""}`)).json();$(`${t} .gas-list-results-info`).text((l?.length||0)+" result(s)"),b({listData:l,elemId:t,numKeysToReplace:["id","gameId","points","playersCount","achieversCount","completion","gameTotalAchievements"],textKeysToReplace:["name","gameName","description","updatedAt","platformOriginalAchievementId"]})}$().ready(async()=>{await auth0Bootstrap();let t="#gas-list-achievements";$(`${t} .gas-filters-sw-li`).on("click",e=>v(t,e)),setupListSearch(t,d),await d(t),$(".ga-loader-container").hide()});})();
