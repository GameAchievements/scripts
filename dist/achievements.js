(()=>{var m=e=>{let t=r=>`0${r}`.slice(-2),s=new Date(e);return`${s.getFullYear()} . ${t(s.getMonth()+1)} . ${t(s.getDate())}`};var u=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var d=(e,t,s=".gas-list-entry")=>{let r=t,n={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return n.ps.rgx.test(e)&&(r=$(".gas-platform-psn",r).css("display","inherit").parents(s).prop("outerHTML")),n.steam.rgx.test(e)&&(r=$(".gas-platform-steam",r).css("display","inherit").parents(s).prop("outerHTML")),n.xbox.rgx.test(e)&&(r=$(".gas-platform-xbox",r).css("display","inherit").parents(s).prop("outerHTML")),t};var g=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var f=(e,t,s={})=>{$(`${e} form.search`).on("submit",async function(r){r.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};var F=document.querySelector("meta[name=domain]")?.content,x,T,y;function M({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:r}){console.info(`=== ${t} results ===`,e);let n=$(t).prop("outerHTML"),o=$(`${t} .gas-list`);x||(y=$(".gas-list-empty",o),T=o.children().first(),x=$(".gas-list-entry",o).first().clone(),$(".gas-list-entry",o).first().remove()),e.length>0?(n=x.prop("outerHTML"),o.html(T),e.forEach((c,b)=>{let a=n;for(let[i,l]of Object.entries(c)){let h=$(".gas-list-entry-cover-game",a);h?.length&&c.gameIconURL?.length&&(h.removeClass("gas-list-entry-cover"),a=g(h,c.gameIconURL)||a);let w=$(".gas-list-entry-cover",a),v=c.iconURL||c.imageURL;if(w?.length&&v?.length&&(a=g(w,v)||a),r.includes(i))a=a.replaceAll(`{|${i}|}`,(i.endsWith("At")?m(l):u(l))||"");else if(s.includes(i))a=a.replaceAll(`{|${i}|}`,Math.round(l||0));else if(i==="importedFromPlatform")a=d(l,a);else if(i==="rarityClass"&&(a=a.replaceAll(`{|${i}|}`,l||""),l.toLowerCase()!=="common")){let C=l.replace(" ","-")?.toLowerCase();a=$(".gas-rarity-tag",a).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${C}`).children(".p1").addClass(C).parents(".gas-list-entry").prop("outerHTML")}}o.append(a).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${b%2>0?"light":"dark"}`)})):(o.html(y),y.show()),o.css("display","flex")}async function p(e,t=""){let s=$(".gas-filters-sw-li.active").first().text(),r={};s!=="All"&&(r.startsWith=s),t.length&&(r.q=t);let o=await(await fetch(`https://${F}/api/achievement/list${Object.keys(r)?.length?`?${new URLSearchParams(r).toString()}`:""}`)).json();$(`${e} .gas-list-results-info`).text(`${o?.length||0} result(s)`),M({listData:o,elemId:e,numKeysToReplace:["id","gameId","points","playersCount","achieversCount","completion","gameTotalAchievements"],textKeysToReplace:["name","gameName","description","updatedAt","platformOriginalAchievementId"]})}async function A(e,t){$(".gas-filters-sw-li",$(e)).removeClass("active"),$(t.target).addClass("active"),$(".ga-loader-container",$(e)).show(),$(".gas-list,.gas-list-results-info",e).hide(),await p(e),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()}$(async()=>{await auth0Bootstrap();let e="#gas-list-achievements";$(`${e} .gas-filters-sw-li`).on("click",t=>A(e,t)),f(e,p),await p(e),$(".ga-loader-container").hide()});})();
