(()=>{var p=e=>{let t=o=>`0${o}`.slice(-2),r=new Date(e);return`${r.getFullYear()} . ${t(r.getMonth()+1)} . ${t(r.getDate())}`};var f=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var u=(e,t,r=".gas-list-entry")=>{let o={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return o.ps.rgx.test(e)&&(t=$(".gas-platform-psn",t).css("display","inherit").parents(r).prop("outerHTML")),o.steam.rgx.test(e)&&(t=$(".gas-platform-steam",t).css("display","inherit").parents(r).prop("outerHTML")),o.xbox.rgx.test(e)&&(t=$(".gas-platform-xbox",t).css("display","inherit").parents(r).prop("outerHTML")),t};var g=(e,t,r=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(r).prop("outerHTML");var d=(e,t,r={})=>{$(`${e} form.search`).on("submit",async function(o){o.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),searchTerm?.length&&($(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,r),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide())})};var A=document.querySelector("meta[name=domain]")?.content,x,b,w;function D({listData:e,elemId:t,numKeysToReplace:r,textKeysToReplace:o}){console.info(`=== ${t} results ===`,e);let h=$(t).prop("outerHTML"),a=$(`${t} .gas-list`);x||(w=$(".gas-list-empty",a),b=a.children().first(),x=$(".gas-list-entry",a).first().clone(),$(".gas-list-entry",a).first().remove()),e.length>0?(h=x.prop("outerHTML"),a.html(b),e.forEach((c,F)=>{let s=h;Object.entries(c).forEach(([i,n])=>{let m=$(".gas-list-entry-cover-game",s);m?.length&&c.gameIconURL?.length&&(m.removeClass("gas-list-entry-cover"),s=g(m,c.gameIconURL)||s);let C=$(".gas-list-entry-cover",s),y=c.iconURL||c.imageURL;if(C?.length&&y?.length&&(s=g(C,y)||s),o.includes(i))s=s.replaceAll(`{|${i}|}`,(i.endsWith("At")?p(n):f(n))||"");else if(r.includes(i))s=s.replaceAll(`{|${i}|}`,Math.round(n||0));else if(i==="importedFromPlatform")s=u(n,s);else if(i==="rarityClass"&&(s=s.replaceAll(`{|${i}|}`,n||""),n.toLowerCase()!=="common")){let v=n.replace(" ","-")?.toLowerCase();s=$(".gas-rarity-tag",s).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${v}`).children(".p1").addClass(v).parents(".gas-list-entry").prop("outerHTML")}}),a.append(s).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${F%2>0?"light":"dark"}`)})):(a.html(w),w.show()),a.css("display","flex")}async function l(e,t=""){let r=$(".gas-filters-sw-li.active").first().text(),o={};r!=="All"&&(o.startsWith=r),t.length&&(o.q=t);let a=await(await fetch(`https://${A}/api/achievement/list${Object.keys(o)?.length?`?${new URLSearchParams(o).toString()}`:""}`)).json();$(`${e} .gas-list-results-info`).text((a?.length||0)+" result(s)"),D({listData:a,elemId:e,numKeysToReplace:["id","gameId","points","playersCount","achieversCount","completion","gameTotalAchievements"],textKeysToReplace:["name","gameName","description","updatedAt","platformOriginalAchievementId"]})}async function L(e,t){$(".gas-filters-sw-li",$(e)).removeClass("active"),$(t.target).addClass("active"),$(".ga-loader-container",$(e)).show(),$(".gas-list,.gas-list-results-info",e).hide(),await l(e),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()}$(async()=>{await auth0Bootstrap();let e="#gas-list-achievements";$(`${e} .gas-filters-sw-li`).on("click",t=>L(e,t)),d(e,l),await l(e),$(".ga-loader-container").hide()});})();
