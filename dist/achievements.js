(()=>{function k(e,t){let s=e-5+1,r=t<=4,a=t>=s+1;return e<=7?Array.from({length:e},(o,i)=>i+1):r?[...Array.from({length:5},(o,i)=>i+1),"ellipsis",e]:a?[1,"ellipsis",...Array.from({length:5},(o,i)=>e-i).sort()]:[1,"ellipsis",...Array.from({length:3},(o,i)=>t-1+i),"ellipsis",e]}function u(e,t,s=1){$(".gas-filters-sw-li.btn-page",$(e)).remove(),$(".btn-ellipsis",$(e)).remove();let r=$(".gas-filters-sw-li.duplicate-btn",$(e));t===1&&$("#btn-page-next").addClass("disabled");let a=k(t,s);for(let o of a)o==="ellipsis"?O():N(r,o)}function N(e,t,s,r={place:"before",elementId:"#btn-page-next"}){let a=e.clone();a.text(t).removeClass("duplicate-btn").addClass(`btn-page ${s??""}`).attr("id",`btn-page-${t}`),r.place==="before"?a.insertBefore(r.elementId):a.insertAfter(r.elementId)}function O(e={place:"before",elementId:"#btn-page-next"}){let t=$('<span class="btn-ellipsis">...</span>');e.place==="before"?t.insertBefore(e.elementId):t.insertAfter(e.elementId)}async function w(e,t,s,r){let a=$(".gas-filters-sw-li.active",$(e)).first().text(),o=s.target.innerText.toLowerCase()==="next"?Number(a)+1:s.target.innerText.toLowerCase()==="previous"?Number(a)-1:Number(s.target.innerText);$(".gas-filters-sw-li:not(.btn-ellipsis)",$(e)).removeClass("active").removeClass("disabled"),o===t?$("#btn-page-next",$(e)).addClass("disabled"):o===1&&$("#btn-page-previous",$(e)).addClass("disabled"),u(e,t,o),$(`#btn-page-${o}`,$(e)).addClass("active"),$(`${e} .btn-page`).on("click",i=>{w(e,t,i,()=>r())}),await r()}function f({elemId:e,fetchFn:t,totalPages:s}){$(`${e} .gas-filters-sw-li`).off("click"),u(e,s),$(`${e} .gas-filters-sw-li`).on("click",r=>{w(e,s,r,()=>t())}),$("#btn-page-1").addClass("active")}function F(e,t){let s=$(".gas-list-total-pages-info"),r=window.MutationObserver,a=new r(o);s.each(function(){a.observe(this,{childList:!0})});function o(i){for(let c of i)if(c.addedNodes.length>0){let n=Number(c.addedNodes[0].data);f({elemId:`${e}-pagination`,fetchFn:t,totalPages:n})}}}var h=e=>{let t=r=>`0${r}`.slice(-2),s=new Date(e);return`${s.getFullYear()} . ${t(s.getMonth()+1)} . ${t(s.getDate())}`};var C=e=>e?.length?e.replace(/"(\w)/g,"\u201C$1").replace(/(\w)"/g,"$1\u201D").replaceAll('"',"'"):e;var v=(e,t,s=".gas-list-entry")=>{let r=t,a={ps:{rgx:/playstation/gi},xbox:{rgx:/xbox/gi},steam:{rgx:/steam|pc|windows|mac|linux/gi}};return a.ps.rgx.test(e)&&(r=$(".gas-platform-psn",r).css("display","inherit").parents(s).prop("outerHTML")),a.steam.rgx.test(e)&&(r=$(".gas-platform-steam",r).css("display","inherit").parents(s).prop("outerHTML")),a.xbox.rgx.test(e)&&(r=$(".gas-platform-xbox",r).css("display","inherit").parents(s).prop("outerHTML")),r};var d=(e,t,s=".gas-list-entry")=>e.removeAttr("srcset").removeAttr("sizes").attr("src",t).parents(s).prop("outerHTML");var b=(e,t,s={})=>{$(`${e} .search-input`).removeAttr("required"),$(`${e} form.search`).on("submit",async function(r){r.preventDefault(),searchTerm=new URLSearchParams($(this).serialize()).get("query"),$(".ga-loader-container",e).show(),$(".gas-list,.gas-list-results-info",e).hide(),await t(e,searchTerm,s),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()})};var y,H,A;function R({listData:e,elemId:t,numKeysToReplace:s,textKeysToReplace:r}){console.info(`=== ${t} results ===`,e);let a=$(t).prop("outerHTML"),o=$(`${t} .gas-list`);y||(A=$(".gas-list-empty",o),H=o.children().first(),y=$(".gas-list-entry",o).first().clone(),$(".gas-list-entry",o).first().remove()),e.length>0?(a=y.prop("outerHTML"),o.html(H),e.forEach((i,c)=>{let n=a;for(let[l,p]of Object.entries(i)){let x=$(".gas-list-entry-cover-game",n);x?.length&&i.gameIconURL?.length&&(x.removeClass("gas-list-entry-cover"),n=d(x,i.gameIconURL)||n);let T=$(".gas-list-entry-cover",n),L=i.iconURL||i.imageURL;if(T?.length&&L?.length&&(n=d(T,L)||n),r.includes(l))n=n.replaceAll(`{|${l}|}`,(l.endsWith("At")?h(p):C(p))||"");else if(s.includes(l))n=n.replaceAll(`{|${l}|}`,Math.round(p||0));else if(l==="importedFromPlatform")n=v(p,n);else if(l==="rarityClass"&&(n=n.replaceAll(`{|${l}|}`,p||""),p.toLowerCase()!=="common")){let M=p.replace(" ","-")?.toLowerCase();n=$(".gas-rarity-tag",n).removeClass("gas-rarity-tag").addClass(`gas-rarity-tag-${M}`).children(".p1").addClass(M).parents(".gas-list-entry").prop("outerHTML")}}o.append(n).children().last().removeClass(["bg-light","bg-dark"]).addClass(`bg-${c%2>0?"light":"dark"}`)})):(o.html(A),A.show()),o.css("display","flex")}var g=1,S=20,V=document.querySelector("meta[name=domain]")?.content;async function m(e,t=""){let s=$(`${e}-pagination .gas-filters-sw-li.active`).text()||1,r=$(".gas-filters-sw-li.active").first().text(),a={};r!=="All"&&(a.startsWith=r),t.length&&(a.q=t);let o=`https://${V}/api/achievement/list?perPage=${S}&offset=${s-1}${Object.keys(a)?.length?`&${new URLSearchParams(a).toString()}`:""}`,i=await fetch(o),c=[],n=g;if(i.ok){let l=await i.json();g=Math.ceil((l?.count||1)/S),c=l.results}$(`${e} .gas-list-results-info`).text(`${c?.length||0} result(s)`),n!==g&&$(`${e} .gas-list-total-pages-info`).text(g),R({listData:c,elemId:e,numKeysToReplace:["id","gameId","points","playersCount","achieversCount","completion","gameTotalAchievements"],textKeysToReplace:["name","gameName","description","updatedAt","platformOriginalAchievementId"]})}async function D(e){await m(e),f({elemId:`${e}-pagination`,fetchFn:()=>m(e),totalPages:g}),F(e,()=>m(e))}async function B(e,t){$(".gas-filters-sw-li",$(e)).removeClass("active"),$(t.target).addClass("active"),$(".ga-loader-container",$(e)).show(),$(".gas-list,.gas-list-results-info",e).hide(),await m(e),$(".gas-list-results-info",e).show(),$(".ga-loader-container").hide()}$(async()=>{await auth0Bootstrap();let e="#gas-list-achievements";$(`${e} .gas-filters-sw-li`).filter(function(){return $(this).parents(`${e}-pagination`).length===0}).on("click",t=>B(e,t)),b(e,m),await D(e),$(".ga-loader-container").hide()});})();
